{% extends 'base.html.twig' %}

{% block body %}
    <div style="background-color:rgb(247, 247, 248);">
        <div class="heading topShadow" style="height: 31px;padding:25px;">
            <div style="float: left;padding-top: 5px;">
                <i>{{ user.shortDescription }}</i>
            </div>
            <div style="float: right;">
                {% if user.isLinked %}
                        <a href="profile/block/<?php echo $this->user['user_id']; ?>">
                            <img src="/images/icone/blacklist.png" title="Bloquer cette personne" />
                        </a>
                        <a style="padding-left:50px;" href="message/<?php echo $this->user['user_id']; ?>">
                            <img src="/images/boutons/big_email.jpg" title="envoyer un message" />
                        </a>
                {% elseif user.isBlacklisted %}
                    <a href="profile/unblock/<?php echo $this->user['user_id']; ?>">
                        <img src="/images/icone/link.png" title="Débloquer cette personne" />
                    </a>
                {% endif %}
            </div>
        </div>
    </div>
    <div style="margin:25px;text-align: left;width: 775px;">
        <div class="grey" style="height: 294px;margin-left: -25px;margin-top: -25px;">
            {% if user == app.user  %}
                <a style="position:absolute;margin-top: 8px;margin-left: 11px;" href="photo/user" title="Modifier les photos">
                    <img src="/images/icone/photo.png" />
                </a>
            {% endif %}
            <div  href="{{ user.pictureUrl('profile') }}" class="popup profilePortrait" style="float:left;background-image:url({{ user.pictureUrl('profile') }});"></div>
            <div class="shadow"></div>
            <div style="padding-left:10px;padding-right:10px;">
                <div style="color:rgb(35, 31, 32);font-size: 35px;letter-spacing:-2px;font-weight: bold;width:100%;">
                    {{ user.username|capitalize }} {{ user.status }}
                    {% if app.user == user %}
                        <span style="float:right;">
                            <a href="profile/edit" title="Editer"><img src="/images/icone/edit.png" /></a>
                        </span>
                    {% endif %}
                </div>
                <br/>
                {% if user.age %}
                    <b>{{ user.age }} ans</b>
                {% endif %}
                <br/> 
                Dernière connexion {{ user.lastConnexionDate }}
                <br/>
                <br/>
                <table class="tableProfil" width="250">
                    {% if user.job %}
                        <tr>
                            <th>Profession</th>
                            <td>{{ user.job }}</td>
                        </tr>
                    {% endif %}
                    <?php endif; ?>
                    <?php if (!empty($this->user['look_libel'])) : ?>
                        <tr>
                            <th>Lifestyle</th>
                            <td><?php echo ucfirst($this->user['look_libel']); ?></td>
                        </tr>
                    <?php endif; ?>
                    <?php if (!empty($this->user['style_libel'])) : ?>
                        <tr>
                            <th>Style musical</th>
                            <td><?php echo ucfirst($this->user['style_libel']); ?></td>
                        </tr>
                    <?php endif; ?>
                    <tr>
                        <th>Mensurations</th>
                        <td><?php if ($this->user['user_taille'] > 0)
                        echo $this->user['user_taille'] . ' cm';
                    if ($this->user['user_poids'] > 0)
                        echo ', ' . $this->user['user_poids'] . ' kg';
                    ?>
                        </td>
                    </tr>
                    <?php if (!empty($this->details['tattoo'])) : ?>
                        <tr>
                            <th>Tatouages</th>
                        <td><?php echo $this->details['tattoo']; ?></td>
                    </tr>
                    <?php endif; ?>
                    <?php if (!empty($this->details['piercing'])) : ?>
                        <tr>
                            <th>Piercings</th>
                            <td><?php echo $this->details['piercing']; ?></td>
                        </tr>
                    <?php endif; ?>
                </table>
            </div>
        </div>
        <?php if(!empty($this->user['user_description'])) : ?>
            <div class="title noMargin">DESCRIPTION</div>
            <div class="shadow noMargin"></div>
            <?php echo nl2br(stripcslashes($this->user['user_description'])); ?>
            <div style="height:25px"></div>
        <?php endif; ?>
        <?php if (!empty($this->tastes)) : ?>
            <div class="title noMargin">PASSIONS</div>
            <div class="shadow noMargin"></div>
            <div style="display: inline-block;">
                <div style="float:left;background-image:url('/images/260882b-emp.jpg');width:350px;height:500px;">
                    <div class="vesteAPatchs">
                        <?php for ($i=0; $i < 15; $i++) : ?>
                            <?php if (!empty($this->tastes['data']['groupes'][$i])) : ?>
                                <span><?php echo $this->tastes['data']['groupes'][$i]; ?></span>
                        <?php else :
                                break;
                            endif;
                        endfor; ?>
                    </div>
                </div>
                <?php if(!empty($this->tastes)) : ?>
                    <div style="float:left;width:400px;">
                        <?php foreach($this->tasteTypes as $typeId => $title) : ?>
                            <?php if (!empty($this->tastes['data'][$title]) && $typeId > 1 && is_array($this->tastes['data'][$title])) : ?>
                                <h2><?php echo strtoupper($title); ?></h2>
                                <ul class="tasteDatas" data-taste-type="<?php echo $title; ?>">
                                    <?php foreach($this->tastes['data'][$title] as $info) : ?>
                                        <li>
                                            <?php echo nl2br(stripcslashes($info)); ?>
                                        </li>
                                    <?php endforeach; ?>
                                </ul>
                            <?php endif; ?>
                        <?php endforeach; ?>
                    </div>
                <?php endif; ?>
            </div>
        <?php endif; ?>
    </div>
{% endblock %}
